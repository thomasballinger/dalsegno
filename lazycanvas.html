<html>
<head>
  <style type="text/css" media="screen">
  </style>
  <style>
    canvas {
      border: solid black 1px;
    }
  </style>
</head>

<h1>Lazy Canvas Context</h1>
<p>
<a href="https://github.com/thomasballinger/dalsegno/blob/master/LazyCanvasCtx.js">Source code on GitHub</a>
</p>
<canvas id="canvas" width="500" height="200"></canvas>
<p>

On this web page the scripts
<code><pre>
<script src="https://cdnjs.cloudflare.com/ajax/libs/immutable/3.8.1/immutable.js"></script>
<script src="LazyCanvasCtx.js"></script>
<script>
var ctx = new LazyCanvasCtx('canvas');
</script>
</pre></code>
have been run. Open the JavaScript console to play with this object.
</p>
<p>
This <code>ctx</code> object behaves mostly like a <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D">normal canvas 2d context object</a>.
For example, try
</p>
<code><pre>
ctx.fillRect(0, 0, 100, 200);
</pre></code>
But once you set <code>ctx.lazy = true</code>, further draw operations will be saved until <code>ctx.trigger()</code> is called:
<code><pre>
ctx.lazy = true;
ctx.fillRect(50, 50, 200, 10); // nothing happens!
ctx.strokeStyle="#FF0000";
ctx.beginPath();
ctx.arc(100,75,50,0,2*Math.PI);
ctx.stroke();
</pre></code>
You can run run these queued drawing operations by calling the trigger method:
<code><pre>
ctx.trigger() // all the queued drawing operations occur
</pre></code>

<h2>Purpose</h2>
<p>
This might be useful for batching draw operations that logically go together, but are interrupted by DOM renders that would show the intermediate state.
</p>

<script src="https://cdnjs.cloudflare.com/ajax/libs/immutable/3.8.1/immutable.js"></script>
<script src="LazyCanvasCtx.js"></script>
<script>
var ctx = new LazyCanvasCtx('canvas');
</script>
</html>

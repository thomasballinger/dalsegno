<html>
<head>
<meta charset="UTF-8">
<title>Dal Segno</title>
<link rel="stylesheet" href="reset.css">
<link rel="stylesheet" href="main.css">
<link rel="stylesheet" href="embed.css">
<link href="https://fonts.googleapis.com/css?family=Open+Sans|Roboto:300" rel="stylesheet">
</head>
<body>
<div class="container">
<script src="../ace-builds/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="../bundle.js"></script>

<div class="hero-container">
<h1 id="hero">Dal Segno</h1>
<img id="header-segno" src="segno.svg" alt="Dal Segno sign from music notation"/>
</div>


<h2>
See the effect of code changes instantly
</h2>
<div class="edit-to-rewind-example">
<script type="dalsegno"
        data-console="true"
        data-speed="50"
        data-editor="true"
        data-canvas-width="400"
        data-program="breakoutProgram"
        data-speed="100"
        data-theme="solarized_light"
        >
</script>
</div>
<p class="instructions">
  Try changing this code; for example, change a number.
  <a href="http://dalsegno.ballingt.com/?code=breakoutProgram">Open fullscreen</a> for more space.
</p>

<p class="emphasis">Dal Segno rewinds back to the last execution of a modified function.</p>

<div class="rows">
<p>
Each time a Dal Segno function is executed, the state of the program is saved just before the function body begins to run.
Then on each editor keystroke the ASTs of the new and old programs are diffed and the changed function is identified.
</p>

<p>
The program state which was most recently stored just before that function was executed is restored with the old AST of the function swapped out for the new one.
This eliminates the wait for a program to reach the point where a change in its code would matter,
ideally making trying out code as quick as tweaking CSS.
</p>
</div>

<img class="spacing-segno" src="segno.svg" alt="Dal Segno sign from music notation"/>

<h2>Language Overview</h2>

<div class="simple-example">
<script type="dalsegno"
        data-console="true"
        data-speed="1"
        data-ast-highlight="true"
        data-canvas-width="300"
        data-program="simpleProgram"
        >
</script>
</div>
<p class="instructions">
Try adding a method from the browser window or console, like <code>(alert "hello")</code>.
<a href="http://dalsegno.ballingt.com/?code=simpleProgram">Open fullscreen</a> for more space.
</p>

<div class="rows">
<p>
The language is pretty Scheme-like, but with the <code>defn</code> special form that defines global functions. These are the only functions that trigger saving interpreter state with every execution.
Native arrays are immutable, but variable in namespaces can be rebound with <code>(set! name)</code>.
</p>
<p>
JavaScript interop works via name lookup: after the local and enclosing namespaces are searched fora variable, JavaScript objects are checked for that name. In these examples, a canvas context is included in this lookup chain for drawing, along with the JavaScript browser objects <code>window</code>, <code>console</code>, and helper objects for getting mouse position and pressed keys.
</p>
</div>

<p class="emphasis">
You can read the <a href="https://github.com/thomasballinger/dalsegno#language">language documentation</a> in the project readme
</p>

<img class="spacing-segno" src="segno.svg" alt="Dal Segno sign from music notation"/>

<h2>Let's play golf</h2>
<div class="game-example">
<script type="dalsegno"
        data-console="true"
        data-speed="500"
        data-canvas-width="500"
        data-program="golfProgram"
        >
</script>
</div>
<p class="instructions">
Try changing <code>fly-loop</code> or <code>collision</code>.
<a href="http://dalsegno.ballingt.com/?code=golfProgram">Open fullscreen</a> for more space.
</p>

<img class="spacing-segno" src="segno.svg" alt="Dal Segno sign from music notation"/>

<h2>Make this game easier</h2>
<p class="instructions">Use spacebar and the mouse to avoid the hidden asteroids.</p>
<div class="game-example">
<script type="dalsegno"
        data-console="true"
        data-speed="500"
        data-canvas-width="500"
        data-program="spaceLightProgram"
        >
</script>
</div>
<p class="instructions">
  Try tweaking the size and shape of the floodlight (line 62) or the shape of the ship.
  <a href="http://dalsegno.ballingt.com/?code=breakoutProgram">Open fullscreen</a> for more space.
</p>


<p class="emphasis">
Write your own at <a href="http://dalsegno.ballingt.com">dalsegno.ballingt.com</a>
</p>
<p class="emphasis">
I'd love to see what you make, so send me the url!
</p>

<img class="spacing-segno" src="segno.svg" alt="Dal Segno sign from music notation"/>

<h2>Stepping through program execution</h2>

<div class="stepping-example">
<script type="dalsegno"
        data-console="true"
        data-speed="50"
        data-editor="read-only"
        data-canvas-width="500"
        data-step-controls="true"
        data-program="breakoutProgram"
        >
</script>
</div>
<p class="instructions">
Use the slider to scroll through the program, or step through the code forwards or backwards.
</p>

<div class="rows">
<p>
Dal Segno takes actual snapshots of the program state instead of recording user inputs and rerunning the program deterministically. This second approach is the more sensible way to implement hot-swapping of code, but this method allows.
</p>
<p>
  Dal Segno takes snapshots of program state not every rendering frame or tick of the game, but instead. While limiting the user to specific program structures like Processing does with its <code>setup()</code> and <code>draw()</code> methods wwould make this easier to implement, Dal Segno's lack of required structures allows the user to write programs free of these constraints. In practice, such constraints are probably a good idea.
</p>
</div>

<a href="https://twitter.com/ballingt" class="twitter-follow-button" data-show-count="false">Follow @ballingt</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<footer>
  Segno image by <a href="https://commons.wikimedia.org/wiki/File:SegnoTeken.svg">Johannes RÃ¶ssel</a>, licenced <a href="https://creativecommons.org/licenses/by-sa/3.0/deed.en">CC BY-SA</a>
</footer>
</div>

<script>
DalSegno.findScriptTags();
</script>
</body>
</html>
